<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FLAMBEAU - La Graine du Changement</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;500;600;700;800&family=Inter:wght@300;400;500;600;700&family=Cinzel:wght@400;500;600;700&display=swap" rel="stylesheet">
    <!-- Chargement des bibliothèques nécessaires -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
    <script src="https://cdn.emailjs.com/dist/email.min.js"></script>
    <style>
        :root {
            --gold: #D4AF37;
            --dark-gold: #B8860B;
            --light-gold: #F5E8AA;
            --deep-navy: #0A1931;
            --navy: #1A2B4A;
            --light-navy: #2C3E66;
            --earth-brown: #8B4513;
            --soil-brown: #A0522D;
            --growth-green: #2E8B57;
            --leaf-green: #3CB371;
            --white: #FFFFFF;
            --off-white: #F8F8F8;
            --light-gray: #EAEAEA;
            --shadow: rgba(10, 25, 49, 0.1);
        }
        
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        
        body {
            font-family: 'Inter', sans-serif;
            color: var(--deep-navy);
            background-color: var(--off-white);
            overflow-x: hidden;
            line-height: 1.6;
        }
        
        .elegant-title {
            font-family: 'Playfair Display', serif;
            font-weight: 700;
            letter-spacing: 0.5px;
        }
        
        .luxury-title {
            font-family: 'Cinzel', serif;
            font-weight: 600;
            letter-spacing: 1px;
        }
        
        /* Navigation Luxueuse */
        .navbar {
            background: rgba(10, 25, 49, 0.95);
            backdrop-filter: blur(20px);
            border-bottom: 1px solid rgba(212, 175, 55, 0.2);
            padding: 20px 0;
            transition: all 0.5s ease;
        }
        
        .navbar.scrolled {
            padding: 15px 0;
            background: rgba(10, 25, 49, 0.98);
            box-shadow: 0 5px 30px rgba(0, 0, 0, 0.15);
        }
        
        .navbar-brand {
            font-family: 'Cinzel', serif;
            font-weight: 700;
            color: var(--gold);
            font-size: 2rem;
            letter-spacing: 2px;
            position: relative;
        }
        
        .navbar-brand:after {
            content: '';
            position: absolute;
            bottom: -5px;
            left: 0;
            width: 100%;
            height: 1px;
            background: linear-gradient(90deg, transparent, var(--gold), transparent);
        }
        
        .nav-link {
            font-weight: 500;
            color: var(--white);
            margin: 0 15px;
            padding: 8px 20px !important;
            position: relative;
            transition: all 0.3s;
            opacity: 0.9;
        }
        
        .nav-link:hover, .nav-link.active {
            color: var(--gold);
            opacity: 1;
        }
        
        .nav-link:after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 0;
            height: 2px;
            background: var(--gold);
            transition: width 0.3s ease;
        }
        
        .nav-link:hover:after, .nav-link.active:after {
            width: 30px;
        }
        
        /* Hero Section Élégante */
        .hero-section {
            min-height: 100vh;
            background: linear-gradient(135deg, var(--deep-navy) 0%, var(--navy) 100%);
            position: relative;
            overflow: hidden;
            display: flex;
            align-items: center;
            padding: 100px 0;
        }
        
        .hero-pattern {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-image: 
                radial-gradient(circle at 20% 30%, rgba(212, 175, 55, 0.05) 0%, transparent 50%),
                radial-gradient(circle at 80% 70%, rgba(46, 139, 87, 0.05) 0%, transparent 50%);
            opacity: 0.3;
        }
        
        .hero-content {
            position: relative;
            z-index: 2;
            text-align: center;
            max-width: 900px;
            margin: 0 auto;
        }
        
        .hero-title {
            font-size: 4.5rem;
            color: var(--white);
            margin-bottom: 25px;
            text-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
            line-height: 1.2;
        }
        
        .hero-subtitle {
            font-size: 1.5rem;
            color: var(--light-gold);
            margin-bottom: 40px;
            font-weight: 300;
            letter-spacing: 1px;
        }
        
        .event-date {
            display: inline-block;
            background: rgba(212, 175, 55, 0.1);
            border: 1px solid rgba(212, 175, 55, 0.3);
            padding: 15px 30px;
            border-radius: 50px;
            color: var(--gold);
            font-size: 1.2rem;
            margin-bottom: 50px;
            letter-spacing: 1px;
        }
        
        .btn-elegant {
            background: transparent;
            border: 2px solid var(--gold);
            color: var(--gold);
            padding: 18px 50px;
            font-size: 1.1rem;
            font-weight: 600;
            letter-spacing: 1.5px;
            border-radius: 0;
            position: relative;
            overflow: hidden;
            transition: all 0.4s ease;
            z-index: 1;
        }
        
        .btn-elegant:before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 0%;
            height: 100%;
            background: var(--gold);
            transition: all 0.4s ease;
            z-index: -1;
        }
        
        .btn-elegant:hover {
            color: var(--deep-navy);
            transform: translateY(-5px);
            box-shadow: 0 10px 25px rgba(212, 175, 55, 0.3);
        }
        
        .btn-elegant:hover:before {
            width: 100%;
        }
        
        /* Section Programme */
        .program-section {
            padding: 120px 0;
            background: var(--off-white);
            position: relative;
        }
        
        .section-header {
            text-align: center;
            margin-bottom: 80px;
        }
        
        .section-title {
            font-size: 3rem;
            color: var(--deep-navy);
            margin-bottom: 20px;
            position: relative;
            display: inline-block;
        }
        
        .section-title:after {
            content: '';
            position: absolute;
            bottom: -15px;
            left: 50%;
            transform: translateX(-50%);
            width: 100px;
            height: 3px;
            background: var(--gold);
        }
        
        .section-subtitle {
            font-size: 1.2rem;
            color: var(--light-navy);
            max-width: 700px;
            margin: 0 auto;
            font-weight: 300;
        }
        
        /* Timeline Élégante */
        .timeline-container {
            position: relative;
            max-width: 1200px;
            margin: 0 auto;
            padding: 40px 0;
        }
        
        .timeline {
            position: relative;
        }
        
        .timeline:before {
            content: '';
            position: absolute;
            left: 50%;
            transform: translateX(-50%);
            width: 2px;
            height: 100%;
            background: linear-gradient(180deg, var(--gold) 0%, transparent 100%);
        }
        
        .timeline-item {
            display: flex;
            justify-content: flex-end;
            padding-right: 50%;
            position: relative;
            margin-bottom: 80px;
            width: 100%;
        }
        
        .timeline-item:nth-child(even) {
            justify-content: flex-start;
            padding-right: 0;
            padding-left: 50%;
        }
        
        .timeline-item:last-child {
            margin-bottom: 0;
        }
        
        .timeline-content {
            background: var(--white);
            border-radius: 12px;
            padding: 30px;
            width: 90%;
            position: relative;
            box-shadow: 0 10px 30px var(--shadow);
            border-left: 4px solid var(--gold);
            transition: all 0.3s ease;
        }
        
        .timeline-content:hover {
            transform: translateY(-10px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.15);
            border-left: 4px solid var(--growth-green);
        }
        
        .timeline-icon {
            position: absolute;
            left: -70px;
            top: 20px;
            width: 50px;
            height: 50px;
            background: var(--deep-navy);
            border: 3px solid var(--gold);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--gold);
            font-size: 1.3rem;
            z-index: 2;
        }
        
        .timeline-item:nth-child(even) .timeline-icon {
            left: auto;
            right: -70px;
        }
        
        .timeline-time {
            display: inline-block;
            background: linear-gradient(135deg, var(--gold), var(--dark-gold));
            color: var(--white);
            padding: 8px 20px;
            border-radius: 30px;
            font-weight: 600;
            margin-bottom: 15px;
            font-size: 0.9rem;
            letter-spacing: 0.5px;
        }
        
        .timeline-title {
            font-size: 1.4rem;
            color: var(--deep-navy);
            margin-bottom: 15px;
            font-weight: 600;
        }
        
        .timeline-description {
            color: var(--light-navy);
            margin-bottom: 10px;
            line-height: 1.7;
        }
        
        .timeline-highlight {
            background: rgba(212, 175, 55, 0.1);
            border-left: 3px solid var(--gold);
            padding: 15px;
            margin-top: 15px;
            border-radius: 0 8px 8px 0;
        }
        
        /* Badge Section */
        .badge-section {
            padding: 120px 0;
            background: linear-gradient(135deg, var(--deep-navy) 0%, var(--navy) 100%);
            position: relative;
            overflow: hidden;
        }
        
        .badge-section .section-title {
            color: var(--white);
        }
        
        .badge-section .section-subtitle {
            color: var(--light-gold);
        }
        
        .badge-container {
            max-width: 1200px;
            margin: 0 auto;
        }
        
        /* Form Élégant */
        .badge-form-container {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(212, 175, 55, 0.2);
            border-radius: 15px;
            padding: 50px;
            margin-bottom: 60px;
            box-shadow: 0 20px 50px rgba(0, 0, 0, 0.2);
        }
        
        .form-title {
            color: var(--gold);
            font-size: 1.8rem;
            margin-bottom: 30px;
            text-align: center;
            font-weight: 600;
        }
        
        .form-control-elegant {
            background: rgba(255, 255, 255, 0.08);
            border: 1px solid rgba(212, 175, 55, 0.3);
            border-radius: 8px;
            padding: 15px 20px;
            color: var(--white);
            font-size: 1rem;
            transition: all 0.3s ease;
            margin-bottom: 25px;
        }
        
        .form-control-elegant:focus {
            background: rgba(255, 255, 255, 0.12);
            border-color: var(--gold);
            box-shadow: 0 0 0 3px rgba(212, 175, 55, 0.1);
            color: var(--white);
        }
        
        .form-control-elegant::placeholder {
            color: rgba(255, 255, 255, 0.5);
        }
        
        .form-label-elegant {
            color: var(--light-gold);
            font-weight: 500;
            margin-bottom: 10px;
            display: block;
            font-size: 0.95rem;
        }
        
        .form-select-elegant {
            background: rgba(255, 255, 255, 0.08);
            border: 1px solid rgba(212, 175, 55, 0.3);
            border-radius: 8px;
            padding: 15px 20px;
            color: var(--white);
            font-size: 1rem;
            width: 100%;
            cursor: pointer;
            margin-bottom: 25px;
        }
        
        .form-select-elegant option {
            background: var(--deep-navy);
            color: var(--white);
        }
        
        /* Badge Design Élégant */
        .badge-preview-container {
            display: none;
        }
        
        .badge-preview-card {
            background: linear-gradient(145deg, #ffffff, #f0f0f0);
            border-radius: 20px;
            padding: 50px;
            max-width: 800px;
            margin: 0 auto;
            box-shadow: 
                0 25px 50px -12px rgba(0, 0, 0, 0.25),
                inset 0 1px 0 0 rgba(255, 255, 255, 0.8);
            position: relative;
            overflow: hidden;
            border: 1px solid rgba(212, 175, 55, 0.3);
        }
        
        .badge-preview-card:before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 8px;
            background: linear-gradient(90deg, var(--gold), var(--growth-green), var(--gold));
        }
        
        .badge-header {
            text-align: center;
            margin-bottom: 40px;
            position: relative;
            padding-bottom: 30px;
        }
        
        .badge-header:after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 150px;
            height: 2px;
            background: linear-gradient(90deg, transparent, var(--gold), transparent);
        }
        
        .badge-logo {
            font-size: 2.5rem;
            color: var(--deep-navy);
            margin-bottom: 10px;
            letter-spacing: 3px;
            font-weight: 700;
        }
        
        .badge-title {
            font-size: 2.2rem;
            color: var(--deep-navy);
            margin-bottom: 10px;
            font-weight: 600;
            line-height: 1.2;
        }
        
        .badge-subtitle {
            font-size: 1.1rem;
            color: var(--light-navy);
            font-style: italic;
            margin-bottom: 15px;
        }
        
        .badge-date {
            display: inline-block;
            background: linear-gradient(135deg, var(--gold), var(--dark-gold));
            color: var(--white);
            padding: 8px 25px;
            border-radius: 30px;
            font-weight: 600;
            letter-spacing: 1px;
        }
        
        .badge-content {
            display: flex;
            align-items: center;
            margin-bottom: 40px;
        }
        
        .badge-photo-container {
            flex: 0 0 180px;
            margin-right: 40px;
        }
        
        .badge-photo-frame {
            width: 180px;
            height: 180px;
            border-radius: 50%;
            padding: 5px;
            background: linear-gradient(135deg, var(--gold), var(--growth-green));
            position: relative;
        }
        
        .badge-photo {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            object-fit: cover;
            border: 4px solid white;
        }
        
        .badge-photo-placeholder {
            width: 100%;
            height: 100%;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--light-gray), #ddd);
            display: flex;
            align-items: center;
            justify-content: center;
            border: 4px solid white;
            color: var(--deep-navy);
            font-size: 3.5rem;
        }
        
        .badge-info {
            flex: 1;
        }
        
        .badge-name {
            font-size: 2.2rem;
            color: var(--deep-navy);
            margin-bottom: 10px;
            font-weight: 600;
        }
        
        .badge-phone {
            font-size: 1.2rem;
            color: var(--light-navy);
            margin-bottom: 15px;
            font-weight: 500;
        }
        
        .badge-sphere {
            display: inline-block;
            background: linear-gradient(135deg, var(--growth-green), var(--leaf-green));
            color: var(--white);
            padding: 8px 20px;
            border-radius: 20px;
            font-weight: 600;
            font-size: 0.9rem;
            letter-spacing: 0.5px;
        }
        
        .badge-mission {
            text-align: center;
            padding: 30px;
            background: linear-gradient(135deg, rgba(212, 175, 55, 0.1), rgba(46, 139, 87, 0.1));
            border-radius: 15px;
            margin-bottom: 30px;
        }
        
        .mission-title {
            font-size: 1.8rem;
            color: var(--deep-navy);
            margin-bottom: 10px;
            font-weight: 600;
        }
        
        .mission-text {
            font-size: 1.1rem;
            color: var(--light-navy);
            line-height: 1.6;
        }
        
        .badge-footer {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding-top: 30px;
            border-top: 1px solid var(--light-gray);
        }
        
        .badge-contact {
            text-align: center;
            flex: 1;
        }
        
        .contact-label {
            font-size: 0.9rem;
            color: var(--light-navy);
            margin-bottom: 5px;
            font-weight: 500;
        }
        
        .contact-info {
            font-size: 1rem;
            color: var(--deep-navy);
            font-weight: 600;
        }
        
        /* Boutons de Téléchargement */
        .download-section {
            text-align: center;
            margin-top: 50px;
        }
        
        .download-title {
            color: var(--white);
            font-size: 1.5rem;
            margin-bottom: 30px;
            font-weight: 600;
        }
        
        .download-buttons {
            display: flex;
            justify-content: center;
            gap: 20px;
            flex-wrap: wrap;
        }
        
        .btn-download {
            background: linear-gradient(135deg, var(--gold), var(--dark-gold));
            border: none;
            color: var(--white);
            padding: 15px 35px;
            border-radius: 8px;
            font-weight: 600;
            letter-spacing: 1px;
            display: flex;
            align-items: center;
            gap: 10px;
            transition: all 0.3s ease;
            box-shadow: 0 10px 20px rgba(212, 175, 55, 0.3);
        }
        
        .btn-download:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(212, 175, 55, 0.4);
            color: var(--white);
        }
        
        .btn-email {
            background: linear-gradient(135deg, var(--growth-green), var(--leaf-green));
            border: none;
            color: var(--white);
            padding: 15px 35px;
            border-radius: 8px;
            font-weight: 600;
            letter-spacing: 1px;
            display: flex;
            align-items: center;
            gap: 10px;
            transition: all 0.3s ease;
            box-shadow: 0 10px 20px rgba(46, 139, 87, 0.3);
        }
        
        .btn-email:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(46, 139, 87, 0.4);
            color: var(--white);
        }
        
        .btn-share {
            background: linear-gradient(135deg, var(--light-navy), var(--navy));
            border: none;
            color: var(--white);
            padding: 15px 35px;
            border-radius: 8px;
            font-weight: 600;
            letter-spacing: 1px;
            display: flex;
            align-items: center;
            gap: 10px;
            transition: all 0.3s ease;
            box-shadow: 0 10px 20px rgba(26, 43, 74, 0.3);
        }
        
        .btn-share:hover {
            transform: translateY(-5px);
            box-shadow: 0 15px 30px rgba(26, 43, 74, 0.4);
            color: var(--white);
        }
        
        /* Footer Élégant */
        .footer {
            background: var(--deep-navy);
            color: var(--white);
            padding: 80px 0 30px;
            position: relative;
        }
        
        .footer:before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, var(--gold), var(--growth-green), var(--gold));
        }
        
        .footer-brand {
            font-family: 'Cinzel', serif;
            font-size: 2rem;
            color: var(--gold);
            margin-bottom: 20px;
            display: inline-block;
        }
        
        .footer-slogan {
            color: var(--light-gold);
            margin-bottom: 30px;
            font-size: 1.1rem;
            line-height: 1.6;
        }
        
        .footer-title {
            color: var(--gold);
            font-size: 1.2rem;
            margin-bottom: 25px;
            font-weight: 600;
        }
        
        .footer-links {
            list-style: none;
            padding: 0;
        }
        
        .footer-links li {
            margin-bottom: 12px;
        }
        
        .footer-links a {
            color: rgba(255, 255, 255, 0.8);
            text-decoration: none;
            transition: all 0.3s ease;
            display: inline-block;
        }
        
        .footer-links a:hover {
            color: var(--gold);
            transform: translateX(5px);
        }
        
        .social-icons {
            display: flex;
            gap: 15px;
            margin-top: 20px;
        }
        
        .social-icon {
            width: 45px;
            height: 45px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.1);
            display: flex;
            align-items: center;
            justify-content: center;
            color: var(--white);
            font-size: 1.2rem;
            transition: all 0.3s ease;
            border: 1px solid rgba(212, 175, 55, 0.3);
        }
        
        .social-icon:hover {
            background: var(--gold);
            transform: translateY(-5px);
            color: var(--deep-navy);
        }
        
        .footer-bottom {
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            padding-top: 30px;
            margin-top: 60px;
            text-align: center;
            color: rgba(255, 255, 255, 0.6);
            font-size: 0.9rem;
        }
        
        /* Loading Overlay */
        .loading-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(10, 25, 49, 0.95);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 9999;
            display: none;
        }
        
        .spinner {
            width: 70px;
            height: 70px;
            border: 4px solid rgba(212, 175, 55, 0.3);
            border-radius: 50%;
            border-top-color: var(--gold);
            animation: spin 1s ease-in-out infinite;
        }
        
        @keyframes spin {
            to { transform: rotate(360deg); }
        }
        
        .loading-text {
            color: var(--gold);
            margin-top: 20px;
            font-size: 1.2rem;
            font-weight: 500;
        }
        
        /* Responsive Design */
        @media (max-width: 1200px) {
            .hero-title {
                font-size: 4rem;
            }
            
            .timeline-container {
                padding: 40px 30px;
            }
        }
        
        @media (max-width: 992px) {
            .hero-title {
                font-size: 3.5rem;
            }
            
            .section-title {
                font-size: 2.5rem;
            }
            
            .timeline:before {
                left: 30px;
            }
            
            .timeline-item {
                padding-right: 0;
                padding-left: 70px;
            }
            
            .timeline-item:nth-child(even) {
                padding-left: 70px;
            }
            
            .timeline-icon {
                left: 5px;
            }
            
            .timeline-item:nth-child(even) .timeline-icon {
                left: 5px;
                right: auto;
            }
            
            .badge-content {
                flex-direction: column;
                text-align: center;
            }
            
            .badge-photo-container {
                margin-right: 0;
                margin-bottom: 30px;
            }
            
            .badge-footer {
                flex-direction: column;
                gap: 20px;
            }
        }
        
        @media (max-width: 768px) {
            .hero-section {
                padding: 120px 0 80px;
            }
            
            .hero-title {
                font-size: 3rem;
            }
            
            .hero-subtitle {
                font-size: 1.3rem;
            }
            
            .section-title {
                font-size: 2.2rem;
            }
            
            .badge-form-container {
                padding: 30px;
            }
            
            .badge-preview-card {
                padding: 30px;
            }
            
            .badge-title {
                font-size: 1.8rem;
            }
            
            .badge-name {
                font-size: 1.8rem;
            }
            
            .download-buttons {
                flex-direction: column;
                align-items: center;
            }
        }
        
        @media (max-width: 576px) {
            .hero-title {
                font-size: 2.5rem;
            }
            
            .hero-subtitle {
                font-size: 1.1rem;
            }
            
            .section-title {
                font-size: 2rem;
            }
            
            .timeline-content {
                padding: 20px;
            }
            
            .badge-photo-frame {
                width: 150px;
                height: 150px;
            }
            
            .badge-photo-placeholder {
                font-size: 2.5rem;
            }
        }
    </style>
</head>
<body>
    <!-- Loading Overlay -->
    <div class="loading-overlay" id="loadingOverlay">
        <div class="text-center">
            <div class="spinner"></div>
            <div class="loading-text">Génération du badge en cours...</div>
        </div>
    </div>

    <!-- Navigation Élégante -->
    <nav class="navbar navbar-expand-lg navbar-dark fixed-top">
        <div class="container">
            <a class="navbar-brand luxury-title" href="#">FLAMBEAU</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav">
                <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarNav">
                <ul class="navbar-nav ms-auto">
                    <li class="nav-item">
                        <a class="nav-link" href="#programme">Programme</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link active" href="#badge">Badge</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" href="#contact">Contact</a>
                    </li>
                </ul>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="hero-section">
        <div class="hero-pattern"></div>
        <div class="container">
            <div class="hero-content">
                <h1 class="hero-title elegant-title">La Graine du Changement</h1>
                <p class="hero-subtitle">Devenir l'ambassadeur qui transforme les sphères d'influence</p>
                <div class="event-date">
                    <i class="fas fa-calendar-alt me-2"></i>Samedi 27 Décembre 2025 | 16h00 - 19h00
                </div>
                <button class="btn btn-elegant" id="generateBadgeBtn">
                    <i class="fas fa-seedling me-2"></i>Générer mon Badge de participation
                </button>
            </div>
        </div>
    </section>



    <!-- Badge Section -->
    <section class="badge-section" id="badge">
        <div class="container">
            <div class="section-header">
                <h2 class="section-title elegant-title">Devenir Ambassadeur</h2>
                <p class="section-subtitle">Générez votre badge d'ambassadeur et engagez-vous à transformer votre sphère d'influence</p>
            </div>
            
            <div class="badge-container">
                <!-- Formulaire -->
                <div class="badge-form-container" id="badgeFormContainer">
                    <h3 class="form-title">Formulaire d'inscription</h3>
                    <form id="badgeForm">
                        <div class="row">
                            <div class="col-md-6">
                                <label class="form-label-elegant">Prénom</label>
                                <input type="text" class="form-control-elegant" id="firstName" required placeholder="Votre prénom">
                            </div>
                            <div class="col-md-6">
                                <label class="form-label-elegant">Nom</label>
                                <input type="text" class="form-control-elegant" id="lastName" required placeholder="Votre nom">
                            </div>
                        </div>
                        
                        <div class="row mt-4">
                            <div class="col-md-6">
                                <label class="form-label-elegant">Téléphone</label>
                                <input type="tel" class="form-control-elegant" id="phone" required placeholder="Votre numéro">
                            </div>
                            <div class="col-md-6">
                                <label class="form-label-elegant">Email</label>
                                <input type="email" class="form-control-elegant" id="email" required placeholder="votre@email.com">
                            </div>
                        </div>
                        
                        <div class="row mt-4">
                            <div class="col-md-12">
                                <label class="form-label-elegant">Sphère d'influence principale</label>
                                <select class="form-select-elegant" id="sphere">
                                    <option value="">Choisissez votre sphère d'influence</option>
                                    <option value="Politique">Politique</option>
                                    <option value="Gouvernements">Gouvernements</option>
                                    <option value="Système Législatif">Système Législatif</option>
                                    <option value="Économie">Économie</option>
                                    <option value="Culture">Culture</option>
                                    <option value="Société Civile">Société Civile</option>
                                    <option value="Système Social">Système Social</option>
                                    <option value="Art">Art</option>
                                    <option value="Éducation">Éducation</option>
                                    <option value="Médecine">Médecine</option>
                                    <option value="Affaires">Affaires</option>
                                    <option value="Religion">Religion</option>
                                    <option value="Sport">Sport</option>
                                </select>
                            </div>
                        </div>
                        
                        <div class="row mt-4">
                            <div class="col-md-12">
                                <label class="form-label-elegant">Photo (optionnelle)</label>
                                <input type="file" class="form-control-elegant" id="photo" accept="image/*">
                                <small class="text-muted d-block mt-2" style="color: rgba(255,255,255,0.6) !important;">Formats acceptés: JPG, PNG. Taille max: 2MB</small>
                            </div>
                        </div>
                        
                        <div class="text-center mt-5">
                            <button type="submit" class="btn btn-elegant">
                                <i class="fas fa-id-card me-2"></i>Générer mon badge d'ambassadeur
                            </button>
                        </div>
                    </form>
                </div>
                
                <!-- Aperçu du Badge -->
                <div class="badge-preview-container" id="badgePreviewContainer">
                    <div class="badge-preview-card">
                        <div class="badge-header">
                            <div class="badge-logo luxury-title">FLAMBEAU</div>
                            <div class="badge-title elegant-title">Ambassadeur du Changement</div>
                            <div class="badge-subtitle">Planter aujourd'hui pour transformer demain</div>
                            <div class="badge-date mt-3">29 Mars 2025 | 16h00 - 19h00</div>
                        </div>
                        
                        <div class="badge-content">
                            <div class="badge-photo-container">
                                <div class="badge-photo-frame">
                                    <img id="badgePhoto" src="" alt="Photo" class="badge-photo" style="display: none;">
                                    <div class="badge-photo-placeholder" id="badgePhotoPlaceholder">
                                        <i class="fas fa-user"></i>
                                    </div>
                                </div>
                            </div>
                            
                            <div class="badge-info">
                                <div class="badge-name" id="badgeName">Prénom Nom</div>
                                <div class="badge-phone" id="badgePhone">Téléphone: </div>
                                <div class="mt-3">
                                    <span class="badge-sphere" id="badgeSphere">Sphère d'influence</span>
                                </div>
                            </div>
                        </div>
                        
                        <div class="badge-mission">
                            <div class="mission-title">Mission d'Ambassadeur</div>
                            <div class="mission-text">
                                "Je m'engage à influencer positivement ma sphère d'influence et à être une graine de transformation dans mon domaine, pour la gloire de Dieu."
                            </div>
                        </div>
                        
                        <div class="badge-footer">
                            <div class="badge-contact">
                                <div class="contact-label">CONTACT</div>
                                <div class="contact-info">016 19 24 532</div>
                            </div>
                            <div class="badge-contact">
                                <div class="contact-label">EMAIL</div>
                                <div class="contact-info">contact@flambeau.org</div>
                            </div>
                            <div class="badge-contact">
                                <div class="contact-label">LIEU</div>
                                <div class="contact-info">Abomey Calavi</div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Boutons de Téléchargement -->
                    <div class="download-section">
                        <h4 class="download-title">Télécharger & Partager</h4>
                        <div class="download-buttons">
                            <button class="btn btn-email" id="sendEmailBtn">
                                <i class="fas fa-envelope"></i> Envoyer par Email
                            </button>
                            <button class="btn btn-share" id="downloadImageBtn">
                                <i class="fas fa-image"></i> Télécharger Image
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer" id="contact">
        <div class="container">
            <div class="row">
                <div class="col-lg-4 mb-5">
                    <div class="footer-brand luxury-title">FLAMBEAU</div>
                    <p class="footer-slogan">« S'épanouir pour servir » – Former une génération d'ambassadeurs qui transforment les sphères d'influence par la lumière du Christ.</p>
                    <div class="social-icons">
                        <a href="#" class="social-icon"><i class="fab fa-facebook-f"></i></a>
                        <a href="#" class="social-icon"><i class="fab fa-instagram"></i></a>
                        <a href="#" class="social-icon"><i class="fab fa-twitter"></i></a>
                        <a href="#" class="social-icon"><i class="fab fa-youtube"></i></a>
                    </div>
                </div>
                
                <div class="col-lg-4 mb-5">
                    <h5 class="footer-title">Liens Rapides</h5>
                    <ul class="footer-links">
                        <li><a href="#programme">Programme de l'événement</a></li>
                        <li><a href="#badge">Devenir ambassadeur</a></li>
                        <li><a href="#">Les 13 sphères d'influence</a></li>
                        <li><a href="#">Témoignages</a></li>
                        <li><a href="#">Ressources</a></li>
                    </ul>
                </div>
                
                <div class="col-lg-4 mb-5">
                    <h5 class="footer-title">Contact & Information</h5>
                    <ul class="footer-links">
                        <li><i class="fas fa-phone me-2"></i> +229 016 19 24 532</li>
                        <li><i class="fas fa-phone me-2"></i> +229 019 62 26 313</li>
                        <li><i class="fas fa-envelope me-2"></i> contact@flambeau.org</li>
                        <li><i class="fas fa-map-marker-alt me-2"></i> Commune d'Abomey Calavi</li>
                        <li><i class="fas fa-clock me-2"></i> Samedi 29 Mars 2025, 17h-20h</li>
                    </ul>
                </div>
            </div>
            
            <div class="footer-bottom">
                <p>&copy; 2025 FLAMBEAU. Tous droits réservés. | « Je suis une graine du changement »</p>
            </div>
        </div>
    </footer>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script>
        // Initialisation EmailJS
        (function(){
            emailjs.init("YOUR_PUBLIC_KEY");
        })();

        document.addEventListener('DOMContentLoaded', function() {
            // Variables globales
            const DOM = {
                badgeForm: document.getElementById('badgeForm'),
                badgeFormContainer: document.getElementById('badgeFormContainer'),
                badgePreviewContainer: document.getElementById('badgePreviewContainer'),
                badgeName: document.getElementById('badgeName'),
                badgePhone: document.getElementById('badgePhone'),
                badgeSphere: document.getElementById('badgeSphere'),
                badgePhoto: document.getElementById('badgePhoto'),
                badgePhotoPlaceholder: document.getElementById('badgePhotoPlaceholder'),
                generateBadgeBtn: document.getElementById('generateBadgeBtn'),
                downloadPdfBtn: document.getElementById('downloadPdfBtn'),
                downloadImageBtn: document.getElementById('downloadImageBtn'),
                sendEmailBtn: document.getElementById('sendEmailBtn'),
                loadingOverlay: document.getElementById('loadingOverlay'),
                navbar: document.querySelector('.navbar')
            };

            let currentBadgeImage = null;
            let currentParticipantData = {};

            // Fonctions de validation
            const validateEmail = (email) => {
                const re = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                return re.test(email);
            };

            const validatePhone = (phone) => {
                const re = /^[\+]?[(]?[0-9]{3}[)]?[-\s\.]?[0-9]{3}[-\s\.]?[0-9]{4,6}$/;
                return re.test(phone);
            };

            // Scroll vers la section badge
            DOM.generateBadgeBtn.addEventListener('click', function() {
                document.getElementById('badge').scrollIntoView({ behavior: 'smooth' });
            });

            // Gestion de la soumission du formulaire
            DOM.badgeForm.addEventListener('submit', function(e) {
                e.preventDefault();
                
                // Récupération des valeurs
                const firstName = document.getElementById('firstName').value.trim();
                const lastName = document.getElementById('lastName').value.trim();
                const phone = document.getElementById('phone').value.trim();
                const email = document.getElementById('email').value.trim();
                const sphere = document.getElementById('sphere').value;
                const photoFile = document.getElementById('photo').files[0];

                // Validation
                if (!firstName || !lastName) {
                    alert('Veuillez saisir votre nom complet.');
                    return;
                }

                if (!validatePhone(phone)) {
                    alert('Veuillez saisir un numéro de téléphone valide.');
                    return;
                }

                if (!validateEmail(email)) {
                    alert('Veuillez saisir une adresse email valide.');
                    return;
                }

                if (!sphere) {
                    alert('Veuillez sélectionner une sphère d\'influence.');
                    return;
                }

                // Stockage des données
                currentParticipantData = { firstName, lastName, phone, email, sphere };

                // Mise à jour de l'aperçu
                DOM.badgeName.textContent = `${firstName} ${lastName}`;
                DOM.badgePhone.textContent = `Téléphone: ${phone}`;
                DOM.badgeSphere.textContent = sphere;

                // Gestion de la photo
                if (photoFile) {
                    if (photoFile.size > 2 * 1024 * 1024) {
                        alert('La photo ne doit pas dépasser 2MB.');
                        return;
                    }

                    const reader = new FileReader();
                    reader.onload = function(e) {
                        DOM.badgePhoto.src = e.target.result;
                        DOM.badgePhoto.style.display = 'block';
                        DOM.badgePhotoPlaceholder.style.display = 'none';
                    };
                    reader.readAsDataURL(photoFile);
                } else {
                    DOM.badgePhoto.style.display = 'none';
                    DOM.badgePhotoPlaceholder.style.display = 'flex';
                }

                // Affichage de l'aperçu
                DOM.badgeFormContainer.style.display = 'none';
                DOM.badgePreviewContainer.style.display = 'block';

                // Scroll vers l'aperçu
                DOM.badgePreviewContainer.scrollIntoView({ behavior: 'smooth', block: 'start' });
            });

        
// Remplacez la fonction de téléchargement d'image par ce code :

DOM.downloadImageBtn.addEventListener('click', function() {
    if (typeof html2canvas === 'undefined') {
        alert('Erreur: La bibliothèque nécessaire n\'est pas chargée.');
        return;
    }

    const badgeElement = document.querySelector('.badge-preview-card');
    
    DOM.loadingOverlay.style.display = 'flex';
    
    // Créer une copie de l'élément pour le mobile
    const mobileBadge = badgeElement.cloneNode(true);
    
    // Dimensions fixes pour une seule page mobile (format portrait)
    const mobileWidth = 350; // Largeur fixe pour mobile
    const mobileHeight = 500; // Hauteur fixe pour tenir sur une seule page
    
    // Appliquer les styles pour mobile - format portrait
    mobileBadge.style.width = mobileWidth + "px";
    mobileBadge.style.height = mobileHeight + "px";
    mobileBadge.style.overflow = "hidden"; // Empêcher le dépassement
    mobileBadge.style.padding = "20px";
    mobileBadge.style.margin = "0 auto";
    mobileBadge.style.display = "flex";
    mobileBadge.style.flexDirection = "column";
    
    // Ajuster la hauteur de l'élément principal
    const badgeContentElement = mobileBadge.querySelector('.badge-content');
    const badgeMissionElement = mobileBadge.querySelector('.badge-mission');
    const badgeFooterElement = mobileBadge.querySelector('.badge-footer');
    
    // Redimensionner dynamiquement les sections
    if (badgeContentElement) {
        badgeContentElement.style.flex = "1";
        badgeContentElement.style.minHeight = "0"; // Permettre le redimensionnement
        badgeContentElement.style.overflow = "hidden";
    }
    
    if (badgeMissionElement) {
        badgeMissionElement.style.flexShrink = "0";
        badgeMissionElement.style.padding = "15px";
        badgeMissionElement.style.marginBottom = "15px";
    }
    
    if (badgeFooterElement) {
        badgeFooterElement.style.flexShrink = "0";
        badgeFooterElement.style.paddingTop = "15px";
    }
    
    // Ajuster les polices pour mobile
    const logo = mobileBadge.querySelector('.badge-logo');
    const title = mobileBadge.querySelector('.badge-title');
    const subtitle = mobileBadge.querySelector('.badge-subtitle');
    const name = mobileBadge.querySelector('.badge-name');
    const phone = mobileBadge.querySelector('.badge-phone');
    const missionTitle = mobileBadge.querySelector('.mission-title');
    const missionText = mobileBadge.querySelector('.mission-text');
    const contactLabels = mobileBadge.querySelectorAll('.contact-label');
    const contactInfos = mobileBadge.querySelectorAll('.contact-info');
    
    if (logo) logo.style.fontSize = "1.8rem";
    if (title) title.style.fontSize = "1.6rem";
    if (subtitle) subtitle.style.fontSize = "0.9rem";
    if (name) name.style.fontSize = "1.5rem";
    if (phone) phone.style.fontSize = "1rem";
    if (missionTitle) missionTitle.style.fontSize = "1.3rem";
    if (missionText) missionText.style.fontSize = "0.9rem";
    if (contactLabels) contactLabels.forEach(el => el.style.fontSize = "0.8rem");
    if (contactInfos) contactInfos.forEach(el => el.style.fontSize = "0.85rem");
    
    // Ajuster la photo pour mobile - taille réduite
    const photoFrame = mobileBadge.querySelector('.badge-photo-frame');
    if (photoFrame) {
        photoFrame.style.width = "100px";
        photoFrame.style.height = "100px";
        photoFrame.style.marginRight = "0";
        photoFrame.style.marginBottom = "15px";
        photoFrame.style.marginTop = "10px";
        
        // Ajuster l'icône de placeholder si présente
        const placeholder = mobileBadge.querySelector('.badge-photo-placeholder');
        if (placeholder) placeholder.style.fontSize = "2rem";
    }
    
    // Ajuster la date
    const badgeDate = mobileBadge.querySelector('.badge-date');
    if (badgeDate) badgeDate.style.fontSize = "0.8rem";
    
    // Ajuster la sphère
    const badgeSphere = mobileBadge.querySelector('.badge-sphere');
    if (badgeSphere) badgeSphere.style.fontSize = "0.8rem";
    
    // Réorganiser la disposition en colonne
    const badgeContent = mobileBadge.querySelector('.badge-content');
    if (badgeContent) {
        badgeContent.style.flexDirection = "column";
        badgeContent.style.textAlign = "center";
        badgeContent.style.alignItems = "center";
        badgeContent.style.justifyContent = "flex-start";
    }
    
    // Ajuster le header
    const badgeHeader = mobileBadge.querySelector('.badge-header');
    if (badgeHeader) {
        badgeHeader.style.marginBottom = "20px";
        badgeHeader.style.paddingBottom = "15px";
    }
    
    // Ajuster le footer pour mobile - sur une seule ligne
    const badgeFooter = mobileBadge.querySelector('.badge-footer');
    if (badgeFooter) {
        badgeFooter.style.flexDirection = "row";
        badgeFooter.style.gap = "5px";
        badgeFooter.style.textAlign = "center";
        badgeFooter.style.paddingTop = "10px";
        badgeFooter.style.borderTop = "1px solid var(--light-gray)";
        badgeFooter.style.flexWrap = "wrap"; // Permettre le passage à la ligne si nécessaire
        badgeFooter.style.justifyContent = "space-around";
    }
    
    // Ajuster les éléments de contact
    const badgeContacts = mobileBadge.querySelectorAll('.badge-contact');
    badgeContacts.forEach(contact => {
        contact.style.flex = "1";
        contact.style.minWidth = "100px"; // Largeur minimale
        contact.style.margin = "2px";
    });
    
    // Ajouter temporairement au DOM
    mobileBadge.style.position = "absolute";
    mobileBadge.style.left = "-9999px";
    mobileBadge.style.top = "0";
    mobileBadge.style.boxSizing = "border-box"; // Inclure padding dans la taille
    document.body.appendChild(mobileBadge);
    
    // Attendre que le rendu soit terminé
    setTimeout(() => {
        html2canvas(mobileBadge, {
            scale: 3, // Haute résolution pour mobile
            width: mobileWidth,
            height: mobileHeight,
            useCORS: true,
            logging: false,
            backgroundColor: '#FFFFFF',
            windowWidth: mobileWidth,
            windowHeight: mobileHeight
        }).then(canvas => {
            // Vérifier si tout le contenu est visible
            const contentHeight = mobileBadge.scrollHeight;
            if (contentHeight > mobileHeight) {
                console.warn("Le contenu dépasse légèrement, ajustement automatique...");
                
                // Réessayer avec une hauteur légèrement plus grande
                const adjustedHeight = Math.min(contentHeight, 550); // Maximum 550px
                
                mobileBadge.style.height = adjustedHeight + "px";
                
                // Recapturer avec la nouvelle hauteur
                html2canvas(mobileBadge, {
                    scale: 3,
                    width: mobileWidth,
                    height: adjustedHeight,
                    useCORS: true,
                    logging: false,
                    backgroundColor: '#FFFFFF'
                }).then(adjustedCanvas => {
                    finalizeDownload(adjustedCanvas, adjustedHeight);
                });
            } else {
                finalizeDownload(canvas, mobileHeight);
            }
            
            function finalizeDownload(canvas, height) {
                const imgData = canvas.toDataURL('image/png');
                const link = document.createElement('a');
                link.download = `badge-mobile-${currentParticipantData.firstName}-${currentParticipantData.lastName}.png`;
                link.href = imgData;
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);
                document.body.removeChild(mobileBadge);

                currentBadgeImage = imgData;
                DOM.loadingOverlay.style.display = 'none';
            }
        }).catch(error => {
            console.error('Erreur:', error);
            if (document.body.contains(mobileBadge)) {
                document.body.removeChild(mobileBadge);
            }
            alert('Une erreur est survenue lors de la génération du badge.');
            DOM.loadingOverlay.style.display = 'none';
        });
    }, 100);
});

// Ajoutez aussi cette fonction pour l'envoi par email (optionnel)
// Modifiez la fonction sendBadgeByEmail pour utiliser le format mobile :

function sendBadgeByEmail() {
    DOM.loadingOverlay.style.display = 'flex';

    // Créer le badge mobile pour l'email aussi
    const badgeElement = document.querySelector('.badge-preview-card');
    const mobileBadge = badgeElement.cloneNode(true);
    
    // Appliquer les mêmes styles mobiles
    mobileBadge.style.width = "350px";
    mobileBadge.style.maxWidth = "90vw";
    mobileBadge.style.padding = "25px";
    mobileBadge.style.margin = "0 auto";
    
    // Ajustements similaires...
    // ... (repéter les ajustements de style ci-dessus)
    
    mobileBadge.style.position = "absolute";
    mobileBadge.style.left = "-9999px";
    mobileBadge.style.top = "0";
    document.body.appendChild(mobileBadge);
    
    html2canvas(mobileBadge, {
        scale: 2,
        width: 350,
        height: mobileBadge.offsetHeight * 2,
        useCORS: true,
        logging: false,
        backgroundColor: '#FFFFFF'
    }).then(canvas => {
        currentBadgeImage = canvas.toDataURL('image/png');
        document.body.removeChild(mobileBadge);
        
        // Continuer avec l'envoi d'email...
        const templateParams = {
            to_name: 'Organisateur FLAMBEAU',
            from_name: `${currentParticipantData.firstName} ${currentParticipantData.lastName}`,
            from_email: currentParticipantData.email,
            participant_name: `${currentParticipantData.firstName} ${currentParticipantData.lastName}`,
            participant_phone: currentParticipantData.phone,
            participant_email: currentParticipantData.email,
            participant_sphere: currentParticipantData.sphere,
            message: `Badge d'ambassadeur mobile généré pour ${currentParticipantData.firstName} ${currentParticipantData.lastName}`,
            badge_image: currentBadgeImage
        };
        
        if (typeof emailjs !== 'undefined') {
            emailjs.send('YOUR_SERVICE_ID', 'YOUR_TEMPLATE_ID', templateParams)
                .then(function(response) {
                    DOM.loadingOverlay.style.display = 'none';
                    alert('Badge mobile envoyé avec succès !');
                }, function(error) {
                    console.error('Erreur EmailJS:', error);
                    DOM.loadingOverlay.style.display = 'none';
                    fallbackEmail();
                });
        } else {
            DOM.loadingOverlay.style.display = 'none';
            fallbackEmail();
        }
    }).catch(error => {
        console.error('Erreur:', error);
        if (document.body.contains(mobileBadge)) {
            document.body.removeChild(mobileBadge);
        }
        DOM.loadingOverlay.style.display = 'none';
        alert('Une erreur est survenue lors de la génération du badge mobile.');
    });
}
            // Envoi Email
            DOM.sendEmailBtn.addEventListener('click', function() {
                if (!currentBadgeImage) {
                    // Générer l'image d'abord
                    const badgeElement = document.querySelector('.badge-preview-card');
                    
                    DOM.loadingOverlay.style.display = 'flex';
                    
                    html2canvas(badgeElement, {
                        scale: 3,
                        useCORS: true,
                        logging: false,
                        backgroundColor: '#FFFFFF'
                    }).then(canvas => {
                        currentBadgeImage = canvas.toDataURL('image/png');
                        sendBadgeByEmail();
                    }).catch(error => {
                        console.error('Erreur:', error);
                        alert('Une erreur est survenue.');
                        DOM.loadingOverlay.style.display = 'none';
                    });
                } else {
                    sendBadgeByEmail();
                }
            });

            // Fonction d'envoi d'email
            function sendBadgeByEmail() {
                DOM.loadingOverlay.style.display = 'flex';

                const templateParams = {
                    to_name: 'Organisateur FLAMBEAU',
                    from_name: `${currentParticipantData.firstName} ${currentParticipantData.lastName}`,
                    from_email: currentParticipantData.email,
                    participant_name: `${currentParticipantData.firstName} ${currentParticipantData.lastName}`,
                    participant_phone: currentParticipantData.phone,
                    participant_email: currentParticipantData.email,
                    participant_sphere: currentParticipantData.sphere,
                    message: `Nouvel ambassadeur inscrit pour l'événement "La Graine du Changement"`,
                    badge_image: currentBadgeImage
                };

                if (typeof emailjs !== 'undefined') {
                    emailjs.send('YOUR_SERVICE_ID', 'YOUR_TEMPLATE_ID', templateParams)
                        .then(function(response) {
                            DOM.loadingOverlay.style.display = 'none';
                            alert('Badge envoyé avec succès !');
                        }, function(error) {
                            console.error('Erreur EmailJS:', error);
                            DOM.loadingOverlay.style.display = 'none';
                            fallbackEmail();
                        });
                } else {
                    DOM.loadingOverlay.style.display = 'none';
                    fallbackEmail();
                }
            }

            // Solution de secours pour email
            function fallbackEmail() {
                const subject = `Badge Ambassadeur - ${currentParticipantData.firstName} ${currentParticipantData.lastName}`;
                const body = `Bonjour,\n\nVoici le badge d'ambassadeur de ${currentParticipantData.firstName} ${currentParticipantData.lastName} pour l'événement "La Graine du Changement".\n\nInformations :\n- Nom: ${currentParticipantData.firstName} ${currentParticipantData.lastName}\n- Téléphone: ${currentParticipantData.phone}\n- Email: ${currentParticipantData.email}\n- Sphère: ${currentParticipantData.sphere}\n\nMission: Influencer positivement cette sphère pour Christ.\n\nLe badge est en pièce jointe.\n\nCordialement,\nSystème FLAMBEAU`;

                // Télécharger d'abord
                const link = document.createElement('a');
                link.download = `badge-${currentParticipantData.firstName}-${currentParticipantData.lastName}.png`;
                link.href = currentBadgeImage;
                document.body.appendChild(link);
                link.click();
                document.body.removeChild(link);

                // Ouvrir client email
                setTimeout(() => {
                    window.location.href = `mailto:contact@flambeau.org?subject=${encodeURIComponent(subject)}&body=${encodeURIComponent(body)}`;
                }, 1000);
            }

            // Effet de scroll sur navbar
            window.addEventListener('scroll', function() {
                if (window.scrollY > 100) {
                    DOM.navbar.classList.add('scrolled');
                } else {
                    DOM.navbar.classList.remove('scrolled');
                }
            });

            // Animation des éléments de timeline
            const animateTimeline = function() {
                const elements = document.querySelectorAll('.timeline-content');
                const screenPosition = window.innerHeight / 1.2;

                elements.forEach(element => {
                    const elementPosition = element.getBoundingClientRect().top;

                    if (elementPosition < screenPosition) {
                        element.style.opacity = '1';
                        element.style.transform = 'translateY(0)';
                    }
                });
            };

            // Initialiser l'animation
            const animatedElements = document.querySelectorAll('.timeline-content');
            animatedElements.forEach(element => {
                element.style.opacity = '0';
                element.style.transform = 'translateY(30px)';
                element.style.transition = 'opacity 0.6s ease, transform 0.6s ease';
            });

            window.addEventListener('scroll', animateTimeline);
            animateTimeline();
        });
    </script>
</body>
</html>